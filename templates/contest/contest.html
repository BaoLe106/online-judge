{% extends "two-column-content.html" %}
{% set page_type = 'detail' %}
    
{% block left_sidebar %}
    {% set title = contest.name %}
    {% include "contest/contest-tabs.html" %}
{% endblock %}

{% block two_col_js %}
    {% include "contest/media-js.html" %}
    {% include "comments/media-js.html" %}
    {% include "actionbar/media-js.html" %}
{% endblock %}

{% block two_col_media %}
    {% include "comments/media-css.html" %}
    {% include "actionbar/media-css.html" %}
{% endblock %}

{% block middle_content %}
    {% include "contest/contest-datetime.html" %}

    <div class="content-description">
        {% cache 3600 'contest_html' contest.id MATH_ENGINE %}
            {{ contest.description|markdown|reference|str|safe }}
        {% endcache %}
    </div>

    {% if contest.ended or request.user.is_superuser or is_editor or is_tester %}
        <hr>
        <div class="contest-problems">
            <h2 style="margin-bottom: 0.2em"><i class="fa fa-fw fa-question-circle"></i>{{ _('Problems') }} </h2>
            <table id="contest-problems" class="table">
                <thead>
                <tr>
                    <th>{{ _('Problem') }}</th>
                    <th>{{ _('Points') }}</th>
                    <th>{{ _('AC Rate') }}</th>
                    <th>{{ _('Users') }}</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                {% for problem in contest_problems %}
                    <tr>
                        <td>
                            {% if problem.is_public %}
                                <a href="{{ url('problem_detail', problem.code) }}">{{ problem.i18n_name }}</a>
                            {% else %}
                                {{ problem.i18n_name }}
                            {% endif %}
                        </td>
                        <td>{{ problem.points|floatformat }}{% if problem.partial %}p{% endif %}</td>
                        <td>{{ problem.ac_rate|floatformat(1) }}%</td>
                        <td>
                            {% if problem.is_public %}
                                <a href="{{ url('ranked_submissions', problem.code) }}">{{ problem.user_count }}</a>
                            {% else %}
                                {{ problem.user_count }}
                            {% endif %}
                        </td>
                        <td>
                            {% if problem.is_public and problem.has_public_editorial %}
                                <a href="{{ url('problem_editorial', problem.code) }}">{{ _('Editorial') }}</a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <hr>
    {% endif %}
    {% include "actionbar/list.html" %}
    <br>
    {% include "comments/list.html" %}
{% endblock %}